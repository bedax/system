#!/usr/bin/env python3

import subprocess



def command(command):
   return subprocess.check_output(command).decode("utf-8").strip()


def main():
   time = command(["date", "+%A %d/%m/%y %H:%M:%S"])
   charging = "yes" if bool(int(command("battery-charging"))) else "no"
   battery = command("battery-capacity")
   light = command("brightness-get")
   volume = command("volume-get")
   desktop = command("desktop")

   lines = []
   lines.append(("charging", charging))
   lines.append(("battery", battery + "%"))
   lines.append(("volume", volume))
   lines.append(("light", light + "%"))
   lines.append(("desktop", desktop))

   body = ""

   for i, (name, value) in enumerate(lines):
      name_with_colon = "{}:".format(name)
      padded_value = '{: >4}'.format(value)

      spaces = " " * (len(time) - len(name_with_colon) - len(padded_value))

      body += "\n" if i > 0 else ""
      body += "{}{}{}".format(name_with_colon, spaces, padded_value)

   command(["notify-confirmation", "--urgency", "normal", time, body])



if __name__ == "__main__":
   main()
