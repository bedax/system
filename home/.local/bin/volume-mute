#!/usr/bin/env python3

import subprocess



def notify(muted):
   subprocess.run([
      "notify-send.py",
      "--urgency", "low",
      "--replaces-process", "confirmation",
      "volume muted" if muted else "volume unmuted"
   ])


def toggle():
   output = subprocess.check_output(["amixer", "set", "Master", "toggle"])
   status = output.splitlines()[-1].rsplit(b" ", 1)[-1]

   return status == b"[off]"


def main():
   notify(toggle())



if __name__ == "__main__":
   main()
