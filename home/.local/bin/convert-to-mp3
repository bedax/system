#!/usr/bin/env python3

import os
import subprocess
import sys



def convert(input_paths):
   for input_path in input_paths:
      input_path_without_extension = os.path.splitext(input_path)[0]
      output_path = "{}.mp3".format(input_path_without_extension)

      subprocess.run([
         "ffmpeg",
         "-y",
         "-i", input_path,
         "-codec:a", "libmp3lame",
         "-q:a", "0",
         "-map_metadata", "0",
         "-id3v2_version", "3",
         output_path
      ])


def main():
   if len(sys.argv) < 2:
      print("USAGE: {} FILE[S]".format(sys.argv[0]))
      sys.exit(1)

   convert(sys.argv[1:])



if __name__ == "__main__":
   main()
